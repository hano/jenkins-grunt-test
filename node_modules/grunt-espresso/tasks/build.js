'use strict';

module.exports = function (grunt) {

    grunt.registerTask('espresso', 'Call espresso build', function () {
		var path = require('path');

		var ev = require('espresso/core/commands/version.js');
		ev.run();

		var eb = require('espresso/core/commands/build.js');


		var options = this.options({pathToApp: ''});      
		var pathToApp = grunt.template.process(options.pathToApp);
		
        var done = this.async();
		
        var args = {
            "directory": pathToApp,
            "help": false,
            "onFinish": function () {
                done();
            }
        };
        eb.run(args);
    });
};